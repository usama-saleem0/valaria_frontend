import React, { useEffect, useState } from "react";


import Assistant  from '../img/Assistant.png'
import axios from "axios";
import { baseurl } from "../baseurl";



const Assistantah= ({onSuccess, jobTypeFilter , sortJobs})=>{
 
const [jobContent, setjobContent] = useState([]);

    useEffect(() => {
   

        fetchJobsData();
  
  }, []);


  const getUserFromLocalStorage = () => {
    const user = localStorage.getItem('userData');
    return user ? JSON.parse(user) : null;
  };


  
const fetchJobsData = async () => {

    const storedUser = getUserFromLocalStorage();
    console.log('Retrieved user from local storage:', storedUser);
    const userId = storedUser.id;

    try {
      const response = await axios.get(`${baseurl}/getjobbyuserid/${userId}`);
      console.log('xxxxx' , response.data)
      setjobContent(response.data)

      


   
    } catch (error) {
      console.error('Error fetching user data:', error);
    }
  };

  const sendIds = (jobId) => {
    localStorage.setItem('jobgetId', JSON.stringify(jobId));
    onSuccess()
    
  }
  

  const filteredAndSortedJobs = sortJobs(
    jobContent.filter(job => jobTypeFilter === '' || job.jobType === jobTypeFilter)
  );


return(



    <>

    
{filteredAndSortedJobs
.map((job, index) => (
   <div class="About-main-card-1-hello-ah">



<div class="About-main-card-1-ah">

    <div class="Job-box-ah" onClick={() => sendIds(job.id)} >
            <div class="Job-logo-ah">
                <img src={Assistant} alt=""/>
            </div>

            <div class="Job-card-ah">

                <div class="Job-list-1-ah">
                    <span>
                        <h2>{job.jobTitle}</h2>
                        <p>{job.jobType}</p>
                    </span>

                    <svg xmlns="http://www.w3.org/2000/svg" width="21" height="27" viewBox="0 0 21 27" fill="none">
                        <path d="M13.8423 3.56754C13.8423 5.45693 12.3106 6.98859 10.4212 6.98859C8.53181 6.98859 7.00015 5.45693 7.00015 3.56754C7.00015 1.67814 8.53181 0.146484 10.4212 0.146484C12.3106 0.146484 13.8423 1.67814 13.8423 3.56754Z" fill="#828282"/>
                        <path d="M13.8421 13.1465C13.8421 15.0359 12.3104 16.5675 10.4211 16.5675C8.53166 16.5675 7 15.0359 7 13.1465C7 11.2571 8.53166 9.72541 10.4211 9.72541C12.3104 9.72541 13.8421 11.2571 13.8421 13.1465Z" fill="#828282"/>
                        <path d="M13.8421 22.7254C13.8421 24.6148 12.3104 26.1464 10.4211 26.1464C8.53166 26.1464 7 24.6148 7 22.7254C7 20.836 8.53166 19.3043 10.4211 19.3043C12.3104 19.3043 13.8421 20.836 13.8421 22.7254Z" fill="#828282"/>
                      </svg>
                </div>

                <div class="Job-list-2-ah">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="18" viewBox="0 0 15 18" fill="none">
                            <path d="M0.761719 7.71196C0.761719 4.50477 2.5523 2.002 5.28759 1.13216C9.23126 -0.127227 13.3397 2.11406 14.0757 6.15372C14.4602 8.2456 13.9384 10.1293 12.5598 11.7783C11.0823 13.5447 9.57729 15.295 8.0888 17.056C7.68785 17.5309 7.27041 17.5309 6.86396 17.056C5.32604 15.2416 3.77165 13.4379 2.2557 11.6022C1.23957 10.3802 0.778196 8.95 0.761719 7.71196ZM7.47364 4.62218C6.01261 4.62751 4.8372 5.78018 4.8427 7.19966C4.84819 8.60314 6.04008 9.73979 7.49561 9.73446C8.94015 9.72912 10.1265 8.57112 10.1156 7.16764C10.1046 5.75883 8.91818 4.61684 7.47364 4.62218Z" fill="#194D79"/>
                          </svg>
                          <p>{job.yearofexperience} year of Experiance</p>
                    </span>

                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M8.10671 0.530029C8.45896 0.530029 8.8112 0.530029 9.16344 0.530029C9.20747 0.538835 9.2471 0.552044 9.29113 0.556447C9.72263 0.622493 10.1629 0.66212 10.59 0.758987C13.8395 1.5031 16.3976 4.21977 16.948 7.50883C17.0008 7.81704 17.0317 8.12525 17.0757 8.43787C17.0757 8.79011 17.0757 9.14235 17.0757 9.4946C17.0669 9.52542 17.0537 9.55624 17.0493 9.58706C16.992 9.97893 16.9612 10.3752 16.8775 10.7583C15.768 15.9891 10.0044 18.8819 5.15228 16.6539C1.56822 15.0116 -0.391131 11.2074 0.357384 7.33711C1.01344 3.92917 3.76093 1.23892 7.18208 0.657717C7.49029 0.604881 7.7985 0.57406 8.10671 0.530029ZM9.95158 10.8067C9.95599 11.5156 9.37919 12.1144 8.68351 12.132C7.9482 12.1496 7.34939 11.5948 7.31417 10.8595C7.30096 10.5073 7.08081 10.2783 6.76819 10.2871C6.46438 10.2959 6.24864 10.5513 6.25744 10.8948C6.27946 11.8634 6.93551 12.744 7.86455 13.0522C8.03627 13.1095 8.12433 13.1931 8.10231 13.3825C8.0891 13.4837 8.09791 13.5894 8.10231 13.6951C8.10671 14.0077 8.33127 14.2367 8.62627 14.2411C8.91247 14.2455 9.14583 14.0077 9.15904 13.7039C9.16344 13.607 9.15904 13.5058 9.15904 13.4089C9.15904 13.1447 9.15904 13.1447 9.40561 13.0566C10.9555 12.5063 11.5059 10.6262 10.4888 9.34489C10.022 8.75489 9.3968 8.45988 8.64388 8.44227C7.92179 8.42466 7.34939 7.88749 7.31417 7.19621C7.27894 6.47412 7.83813 5.84448 8.54702 5.80926C9.29553 5.76963 9.91636 6.33322 9.94718 7.08174C9.96039 7.43398 10.1805 7.66294 10.4932 7.65413C10.797 7.64532 11.0259 7.38995 10.9951 7.04651C10.9731 6.79554 10.9335 6.54016 10.8498 6.3068C10.5856 5.58911 10.0749 5.10918 9.34837 4.86701C9.21187 4.82298 9.15023 4.75253 9.15904 4.60723C9.16784 4.47955 9.16344 4.35626 9.15904 4.22857C9.15023 3.92917 8.92568 3.70461 8.63508 3.70021C8.35769 3.69581 8.12433 3.92036 8.10671 4.20656C8.09791 4.32544 8.09351 4.44872 8.10671 4.56761C8.12433 4.74813 8.04067 4.83179 7.87335 4.88462C6.67573 5.2809 6.00207 6.55778 6.34991 7.76861C6.64051 8.7813 7.54313 9.47698 8.60426 9.499C9.37038 9.51221 9.94718 10.0714 9.95158 10.8067Z" fill="#194D79"/>
                          </svg>
                        <p>${job.yearlySalary}</p>
                    </span>

                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="14" viewBox="0 0 17 14" fill="none">
                            <path d="M0.0742188 12.2672C0.0742188 10.4173 0.0742188 8.56736 0.0742188 6.71306C0.091671 6.71742 0.10476 6.71742 0.122212 6.72178C2.70515 7.58131 5.28808 8.44083 7.86666 9.30472C8.24188 9.43125 8.60838 9.43561 8.9836 9.31344C11.5273 8.46265 14.0753 7.61621 16.619 6.76978C16.6713 6.75232 16.728 6.73487 16.7848 6.71742C16.7891 6.75232 16.7935 6.76978 16.7935 6.78723C16.7935 8.55427 16.7979 10.3257 16.7848 12.0927C16.7848 12.337 16.7193 12.5945 16.6146 12.817C16.2481 13.5849 15.6198 13.947 14.769 13.9427C10.5499 13.9383 6.33522 13.9427 2.11613 13.9427C2.04196 13.9427 1.96343 13.9427 1.88925 13.9383C1.08209 13.9078 0.357818 13.3318 0.144028 12.5508C0.122212 12.4592 0.100397 12.3632 0.0742188 12.2672ZM0.0742188 5.60484C0.0873079 5.61356 0.10476 5.62229 0.117849 5.62665C2.81859 6.52544 5.51933 7.4286 8.22443 8.31866C8.35968 8.3623 8.52984 8.35793 8.6651 8.3143C11.3309 7.43296 13.9968 6.5429 16.6626 5.65719C16.7717 5.62229 16.7979 5.56993 16.7979 5.46086C16.7935 5.0071 16.7935 4.5577 16.7935 4.10394C16.7935 2.92155 15.9776 2.10129 14.7952 2.10129C13.6695 2.10129 12.5439 2.10129 11.4138 2.10129C11.3527 2.10129 11.2873 2.10129 11.2175 2.10129C11.2175 1.87442 11.2219 1.68244 11.2175 1.4861C11.2131 1.3683 11.2131 1.24613 11.1913 1.12833C11.0517 0.460782 10.5107 0.0157488 9.81258 0.0113857C8.89198 0.00265956 7.97137 0.00702263 7.05076 0.0113857C6.95477 0.0113857 6.85442 0.0201118 6.75844 0.0375641C6.10834 0.177182 5.66767 0.705113 5.65022 1.3683C5.64149 1.60391 5.65022 1.84387 5.65022 2.09693C5.56296 2.09693 5.49751 2.09693 5.43206 2.09693C4.28894 2.09693 3.14582 2.09257 2.00269 2.09693C1.13881 2.11002 0.414538 2.63795 0.16148 3.44948C0.126576 3.55856 0.100397 3.66764 0.0742188 3.77671C0.0742188 4.38754 0.0742188 4.99837 0.0742188 5.60484ZM7.0464 1.41629C7.96701 1.41629 8.88761 1.41629 9.82131 1.41629C9.82131 1.63881 9.82131 1.85696 9.82131 2.09257C8.9007 2.09257 7.98446 2.09257 7.0464 2.09257C7.0464 1.86133 7.0464 1.64754 7.0464 1.41629Z" fill="#194D79"/>
                          </svg>
                        <p>{job.jobType}</p>
                    </span>
                </div>

        

            </div>

    </div>
    <div class="Draft-ah">

        {job.active = 1 ?


       
        <button>
            Open
        </button>
        :

        <button>
            Closed
        </button>
         }

        <span>
            <h3>0</h3>
            <p>Views</p>
        </span>

        <span>
            <h3>0</h3>
            <p>Applied</p>
        </span>

        <span>
            <h3>-</h3>
            <p>Remaining</p>
        </span>
    </div>
</div>




</div>
))}

    </>
    
)




}



export default Assistantah
