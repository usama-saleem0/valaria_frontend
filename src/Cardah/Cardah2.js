import React, { useEffect, useState } from "react";

import office from "../img/office-logo.png";
import axios from "axios";
import { baseurl } from "../baseurl";
import { useNavigate } from "react-router-dom";

const Cardah2 = () => {
  


  const [jobContent, setjobContent] = useState([]);

  const navigate = useNavigate();


  useEffect(() => {
    fetchJobsData();
  }, []);

  const calculateHoursAgo = (createdAt) => {
    const createdDate = new Date(createdAt);
    const currentDate = new Date();
    const diffInMilliseconds = currentDate - createdDate;
    const diffInHours = Math.floor(diffInMilliseconds / (1000 * 60 * 60));
    return diffInHours;
  };

  const fetchJobsData = async () => {
    try {
      const response = await axios.get(`${baseurl}/getjobs`);
      console.log("xxxxx", response.data.jobs);
      setjobContent(response.data.jobs);
    } catch (error) {
      console.error("Error fetching user data:", error);
    }
  };

  const setJobId = (e) => {
    localStorage.setItem("jobId", e);
    navigate("/viewjobdetail");
  };

  

  return (
    <>
     { jobContent.map((job, index) => (
        <div class="Job-Openings-card">
          <div class="Job-Openings-list-1">
            <div class="Job-Openings-logo">
              <img src={office} alt="" />
            </div>
            <span>
              <h2>{job.jobTitle}</h2>
              <p>{job.jobType}</p>
            </span>
          </div>

          <div class="Job-Openings-list-2">
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="11"
                height="13"
                viewBox="0 0 11 13"
                fill="none"
              >
                <path
                  d="M0.949219 5.47176C0.949219 3.12132 2.26148 1.28711 4.26609 0.649639C7.15627 -0.27333 10.1672 1.36924 10.7066 4.32978C10.9884 5.86285 10.606 7.24339 9.59562 8.45185C8.51281 9.74636 7.40987 11.0291 6.31901 12.3197C6.02516 12.6678 5.71923 12.6678 5.42136 12.3197C4.29427 10.99 3.1551 9.66814 2.04411 8.32279C1.29942 7.4272 0.961295 6.37908 0.949219 5.47176ZM5.86817 3.20736C4.79743 3.21127 3.93601 4.05602 3.94004 5.09631C3.94406 6.12488 4.81756 6.9579 5.88427 6.95398C6.94293 6.95007 7.8124 6.10141 7.80435 5.07285C7.7963 4.04038 6.92683 3.20345 5.86817 3.20736Z"
                  fill="#194D79"
                />
              </svg>
              <p> {job.yearofexperience} of Experience</p>
            </span>

            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="13"
                height="13"
                viewBox="0 0 13 13"
                fill="none"
              >
                <path
                  d="M6.44948 0.948547C6.69753 0.948547 6.94559 0.948547 7.19365 0.948547C7.22465 0.954749 7.25256 0.964051 7.28357 0.967152C7.58744 1.01366 7.89751 1.04157 8.19827 1.10978C10.4866 1.6338 12.2881 3.54694 12.6757 5.86316C12.7129 6.08021 12.7346 6.29726 12.7656 6.51741C12.7656 6.76546 12.7656 7.01352 12.7656 7.26158C12.7594 7.28328 12.7501 7.30499 12.747 7.32669C12.7067 7.60265 12.685 7.88172 12.6261 8.15148C11.8447 11.8351 7.78588 13.8723 4.36891 12.3033C1.84494 11.1468 0.465123 8.46775 0.992242 5.74223C1.45425 3.34229 3.38909 1.44776 5.79833 1.03847C6.01538 1.00126 6.23243 0.979554 6.44948 0.948547ZM7.74867 8.18559C7.75177 8.6848 7.34558 9.10649 6.85567 9.1189C6.33785 9.1313 5.91616 8.74061 5.89135 8.22279C5.88205 7.97474 5.72701 7.8135 5.50686 7.8197C5.29292 7.8259 5.14098 8.00574 5.14718 8.2476C5.16269 8.92975 5.62469 9.54989 6.27894 9.76694C6.39987 9.80725 6.46188 9.86617 6.44638 9.9995C6.43707 10.0708 6.44328 10.1452 6.44638 10.2196C6.44948 10.4398 6.60761 10.601 6.81536 10.6041C7.01691 10.6072 7.18124 10.4398 7.19055 10.2258C7.19365 10.1576 7.19055 10.0863 7.19055 10.0181C7.19055 9.83206 7.19055 9.83206 7.36418 9.77004C8.45563 9.38246 8.84322 8.05846 8.12696 7.15615C7.79828 6.74066 7.35798 6.53291 6.82776 6.52051C6.31925 6.50811 5.91616 6.12982 5.89135 5.64301C5.86655 5.13449 6.26033 4.69109 6.75955 4.66629C7.28667 4.63838 7.72387 5.03527 7.74557 5.56239C7.75487 5.81045 7.90991 5.97168 8.13006 5.96548C8.34401 5.95928 8.50524 5.77944 8.48354 5.53759C8.46803 5.36085 8.44013 5.18101 8.38121 5.01667C8.19517 4.51125 7.83549 4.17328 7.32388 4.00274C7.22775 3.97173 7.18434 3.92212 7.19055 3.8198C7.19675 3.72988 7.19365 3.64306 7.19055 3.55314C7.18434 3.34229 7.02621 3.18415 6.82156 3.18105C6.62622 3.17795 6.46188 3.33609 6.44948 3.53763C6.44328 3.62135 6.44018 3.70817 6.44948 3.79189C6.46188 3.91902 6.40297 3.97793 6.28514 4.01514C5.44175 4.2942 4.96734 5.19341 5.2123 6.0461C5.41694 6.75926 6.05259 7.24917 6.79986 7.26468C7.33938 7.27398 7.74557 7.66777 7.74867 8.18559Z"
                  fill="#194D79"
                />
              </svg>
              <p>${job.yearlySalary}</p>
            </span>
          </div>

          <div class="Job-Openings-list-3">
            {
              (job.active = 1 ? (
                <button onClick={() => setJobId(job.id)}>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="12"
                    height="13"
                    viewBox="0 0 12 13"
                    fill="none"
                  >
                    <path
                      d="M6.22494 12.0915C3.11542 12.1077 0.54035 9.55203 0.527393 6.44251C0.514437 3.27793 3.04416 0.728773 6.21522 0.709338C9.32474 0.689904 11.9031 3.2585 11.9128 6.38745C11.9257 9.52936 9.38304 12.0785 6.22494 12.0915ZM5.70345 7.00288C5.65486 6.93809 5.63543 6.89599 5.60304 6.86683C5.24674 6.5073 4.8872 6.151 4.5309 5.7947C4.3819 5.6457 4.20375 5.58416 3.99969 5.64246C3.611 5.75259 3.49763 6.21902 3.78915 6.51377C4.28149 7.00935 4.77707 7.50493 5.27265 7.99727C5.56417 8.28879 5.83949 8.28879 6.13425 7.99727C6.76263 7.36889 7.39101 6.74051 8.01939 6.11213C8.22669 5.90483 8.43075 5.70076 8.63806 5.49346C8.78705 5.34123 8.83564 5.16308 8.7741 4.95901C8.65425 4.5768 8.19106 4.47963 7.89631 4.77439C7.19666 5.47079 6.50026 6.16719 5.80386 6.86683C5.77147 6.89599 5.75203 6.93809 5.70345 7.00288Z"
                      fill="white"
                    />
                  </svg>
                  Actively hiring
                </button>
              ) : (
                <button style={{ background: "#d11515", border: "#d11515" }}>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="12"
                    height="13"
                    viewBox="0 0 12 13"
                    fill="none"
                  >
                    <path
                      d="M6.22494 12.0915C3.11542 12.1077 0.54035 9.55203 0.527393 6.44251C0.514437 3.27793 3.04416 0.728773 6.21522 0.709338C9.32474 0.689904 11.9031 3.2585 11.9128 6.38745C11.9257 9.52936 9.38304 12.0785 6.22494 12.0915ZM5.70345 7.00288C5.65486 6.93809 5.63543 6.89599 5.60304 6.86683C5.24674 6.5073 4.8872 6.151 4.5309 5.7947C4.3819 5.6457 4.20375 5.58416 3.99969 5.64246C3.611 5.75259 3.49763 6.21902 3.78915 6.51377C4.28149 7.00935 4.77707 7.50493 5.27265 7.99727C5.56417 8.28879 5.83949 8.28879 6.13425 7.99727C6.76263 7.36889 7.39101 6.74051 8.01939 6.11213C8.22669 5.90483 8.43075 5.70076 8.63806 5.49346C8.78705 5.34123 8.83564 5.16308 8.7741 4.95901C8.65425 4.5768 8.19106 4.47963 7.89631 4.77439C7.19666 5.47079 6.50026 6.16719 5.80386 6.86683C5.77147 6.89599 5.75203 6.93809 5.70345 7.00288Z"
                      fill="white"
                    />
                  </svg>
                  Closed
                </button>
              ))
            }
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="13"
                height="12"
                viewBox="0 0 13 12"
                fill="none"
              >
                <path
                  d="M12.2738 6.22142C12.2171 7.18934 11.9661 8.05868 11.524 8.80553C11.0789 9.55835 10.4336 10.1947 9.61204 10.6906C8.69192 11.2462 7.72998 11.53 6.75907 11.53C5.96442 11.53 5.14886 11.3388 4.33629 10.9654C3.57749 10.6159 2.92324 10.0722 2.3885 9.34326C2.19432 9.07738 2.23316 8.75175 2.48111 8.56952C2.72906 8.3843 3.0517 8.44405 3.24887 8.70396C3.95091 9.63901 4.87701 10.2036 5.99728 10.3769C8.11834 10.7055 10.1348 9.55835 10.8996 7.58368C11.7032 5.51042 10.8847 3.19519 8.95481 2.07192C7.18328 1.04724 4.81128 1.41768 3.43708 2.94424C2.96208 3.47301 2.6245 4.07647 2.4363 4.74565C2.62749 4.67096 2.84557 4.71279 2.99793 4.86216C3.10249 4.96373 3.15925 5.09517 3.15925 5.23558C3.15925 5.38196 3.0995 5.52237 2.98897 5.63589C2.74998 5.87787 2.43331 6.19454 2.10768 6.51419C1.9852 6.63667 1.82986 6.69343 1.67152 6.6785C1.51618 6.66356 1.37876 6.57991 1.28316 6.43951C1.09794 6.16765 0.912723 5.88982 0.736466 5.62394C0.679706 5.53731 0.619958 5.44769 0.563197 5.36105C0.542285 5.33118 0.527348 5.3013 0.512411 5.27442C0.506437 5.26546 0.500462 5.25351 0.494487 5.24454L0.476562 5.20272V4.93385L0.497474 4.89502C0.670744 4.5664 0.93961 4.44691 1.21744 4.57537C1.26822 4.59927 1.31304 4.63213 1.35187 4.66798C1.8896 2.59771 3.20406 1.23844 5.25641 0.623033C6.28407 0.31533 7.38642 0.333255 8.44396 0.679794C9.49553 1.02334 10.4037 1.65369 11.0729 2.5051C11.9482 3.61641 12.3515 4.86813 12.2738 6.22142ZM7.09665 2.95321C7.09665 2.62459 6.87259 2.3856 6.5619 2.38261H6.55891C6.41552 2.38261 6.28407 2.43639 6.18549 2.53198C6.08093 2.63654 6.02118 2.78292 6.02118 2.94723C6.02118 3.35949 6.02118 3.77175 6.02118 4.18402V4.28858C6.02118 4.89502 6.02118 5.50445 6.02118 6.11089C6.02118 6.32001 6.10782 6.49029 6.2781 6.61576C6.57684 6.83384 6.87558 7.06088 7.16834 7.27897C7.27589 7.35963 7.38642 7.44327 7.49397 7.52393C7.58658 7.59264 7.67919 7.66434 7.77479 7.73305C7.97195 7.87943 8.16614 8.0288 8.3633 8.1722C8.46488 8.24987 8.57541 8.28572 8.68893 8.28572C8.78453 8.28572 8.88013 8.25883 8.96975 8.20207C9.15795 8.08855 9.25056 7.8884 9.2177 7.66135C9.19081 7.47315 9.06833 7.35664 8.96078 7.27598C8.73374 7.1057 8.5067 6.93541 8.28264 6.76214L8.20497 6.70538C7.83752 6.42756 7.47306 6.15271 7.10561 5.87489C7.09963 5.86891 7.09665 5.86592 7.09366 5.86592C7.09366 5.86294 7.09366 5.85995 7.09366 5.85397C7.09665 5.4925 7.09665 5.12206 7.09665 4.76656C7.09665 4.64706 7.09665 4.52757 7.09665 4.40508V3.96295C7.09665 3.62836 7.09665 3.29078 7.09665 2.95321Z"
                  fill="#828282"
                />
              </svg>
              Updated {calculateHoursAgo(job.createdAt)} hours ago
            </a>
          </div>
        </div>
      ))}


    </>
  );
};

export default Cardah2;

